## NEWorld 宽松版多人协作开发规范

### 前言

为了提高团队协作的工作效率、避免不必要的麻烦，各位开发人员有必要遵守一些规则。

_qiaozhanrong: 原来的开发规范导致了某些开发者(如abc612008)对写代码产生了一定程度的恐惧心理，总是担心写出来的代码被批判一番甚至因此被永久取消`write`权限。而考虑到目前开发者数量不是很多，且部分开发者水平有限(比如我2333)，在此提出宽松版开发规范，若有不当请大家指正。_

_DLaboratory:规章制度类的文件应当言简意赅，让读者能够快速地了解规定的内容。信誉度的设计太过复杂，在实际执行的时候，每时每刻都要记录每个人的信誉度？花这个精力干些实事吧。设立这个文件是为了纠正某些错误的行为，减少制造的麻烦，只要最终达到效果即可，没有必要建立一套信誉度体系。_

_Null:
开源项目的能源来自于各大无私奉献的开发者，开发者不是来打工的，也没有付给他们任何报酬，他们本身也没有义务来贡献。因此过于苛刻的开发规范容易浇灭开发者的开发热情。所有管理人员应该谨记，不要将开发NEWorld当成是他们的荣幸，而应当作是我们的荣幸。_

_ascchrvalstr:
稍有常识的人都能看出newline at end of file、UTF-8无BOM、用空格代替制表符的必要性，可是我屡次查获违反这些显而易见的规定的人。按道理说应该取消权限的我都手下留情，可是你们一再违反规则，我到时候取消权限不要怪我。_

_qiaozhanrong:
有些时候规定显而易见，但容易因为不经意的疏忽而违反，这种情况下进行取消write权限等处罚就过于严厉了。代码里出现这些问题只要提醒他注意，并且帮着改正就行了，现在开发者又不是很多，帮别人改正几个格式错误也并非难事。首先应尽可能做好自己，再对别人提要求。_

_ascchrvalstr:
这些违反规定的情况，全部都是经过一点点小的检查，比如检查一下GitHub for Windows里面显示的`diff`，很轻松就可以避免。我今天已经查获三次没用`rebase`的人和一次使用制表符的人。他们犯起错来很容易，可是我改起来哪有这么容易？！一天改4次已经不是一个小数目了，我哪里每天有时间帮他们到处修补？！从源头上避免犯错误才是正道。另外，你们都可以看出来，我在这个repo里面已经做得很好了。_

### 第一节 代码文件规范

0. 所有代码和文本文件都使用**UTF-8(无BOM)**编码，末尾要加空行(推荐使用`Notepad++`等进行文件格式检查)。
0. **严禁**擅自修改许可证。

### 第二节 Git使用及GitHub使用规范

0. 进行push操作时请**仔细检查**，不要上传目标代码二进制文件。
0. **严禁**恶意上传大文件或二进制文件，或者恶意修改他人代码，否则将施以严厉处罚。
0. 所有分支都应属于项目的一部分，除releases分支外都应计划最终合并到主分支。
0. 经常浏览issues，解决属于你范围的issues。
0. 当本地与远程的commit历史出现差异时，使用`rebase`而不是`merge`。
0. 文档编写者应尽自己所能使别人能清晰地看出你想表达什么。文档包括但不限于`Markdown`格式的*所有*文件，`doc`目录下的*所有*文件，提交说明，里程碑说明，Release说明，代码注释。要善于利用格式。

### 第三节 合作开发规范

0. 请开发人员加入NEWorld开发组的QQ群以便交流，群号为308354849。
0. 确保主要开发人知晓并同意你要做的大修改(包括但不限于重构，加入新库)。
0. 若覆写Git库，请通知其他开发者。

### 第四节 C/C++代码规范

#### 4.1 缩进风格

0. 所有代码使用**4个空格**缩进(大多数IDE都可以设置缩进方法)。
0. 原则上使用Allman/BSD代码风格(推荐使用AStyle工具进行自动格式化)，`namespace`中的代码缩进(`-N`参数)。

```C++
namespace Hashing
{
    void initCRC32Table()
    {
        if(CRC32TableInitialized)
        {
            return;
        }
        // ...
    }
}
```

#### 4.2 代码编写

使用正确的C/C++语法和规则编写正确的C/C++代码，每个人对自己写的代码负责。

#### 4.3 命名风格

类名使用大驼峰，函数名/变量名使用小驼峰。

#### 4.4 代码注释

0. 函数要在声明前一行加注释说明其功能；推荐在大段代码中在某些位置加注释以说明代码。
0. 不以说明代码为目的的注释允许适当出现。

#### 4.5 外部依赖库

确保你使用的库都是可以跨平台(Windows, Linux, UNIX)的。

### 第五节 处罚条例

0. 当出现恶意地上传二进制文件/大文件等在本文件中注明“施以严厉处罚”的行为，由全体开发者讨论决定处罚方案。
0. 处罚的级别有以下4种。

- 警告
- 严厉书面警告
- 临时剥夺write权利
- 剥夺write权利(当事人提出恢复权限的申请，并由全体开发者讨论决定之后，可以恢复write权利)

### 第六节 附则

0. 一般来说一个月左右会检查repo中是否存在垃圾文件，若存在过多垃圾文件则会覆写并在issues里声明，届时请各位开发者重新clone。
0. 对于"恶意上传二进制文件/大文件"**可能的**判定标准：多次上传与项目无关的二进制文件或在一个月内累计上传超过100MB的垃圾文件。
0. 对于"恶意修改他人代码/添加新库"**可能的**判定标准：做出错误修改并被其他成员劝阻和revert后再次做出本质上相同的错误修改。
