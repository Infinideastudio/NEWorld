## NEWorld 多人协作开发规范(qiaozhanrong规定的宽松版，试行)

### 前言

编写此多人协作开发规范的目的，是考虑到NEWorld的开发过程中存在的各种严重的问题。
为了提高工作效率、避免不必要的麻烦，也为了给予开发者足够的尊重，我们需要采取包括正确地使用Git、统一代码缩进风格的措施。
各位开发人员必须要遵守此规范的条款。

qiaozhanrong: 原来的开发规范导致了某些开发者(如abc612008)对写代码产生了一定程度的恐惧心理，
总是担心写出来的代码被批判一番甚至因此被永久取消`write`权限。
而考虑到目前开发者数量不是很多，且部分开发者水平有限(比如我2333)，在此提出宽松版开发规范，若有不当请大家指正。

### 第一节 代码文件规范

0. 所有代码使用**UTF-8**编码。
0. 所有代码使用**4个空格**缩进(大多数IDE都可以设置缩进方法)。
0. 每个人对自己写的代码负责。
0. 确保你使用的库都是可以跨平台(Windows, Linux, UNIX)的。
0. **严禁擅自修改许可证。**

### 第二节 Git使用及GitHub使用规范

0. 进行push操作时请**仔细检查**，不要上传编译后的二进制文件，如`.exe`、`.obj`、`.dll`、`.lib`等。
0. **严禁**恶意上传大文件或二进制文件/恶意修改他人代码，否则将施以严厉处罚。
0. 所有分支都应属于项目的一部分，除releases分支外都应计划最终合并到主分支。
0. 修改`.gitignore`文件时应谨慎。
0. 经常浏览issues，解决属于你范围的issues。
0. 所有文本文件和代码末尾要加空行。

### 第三节 合作开发规范

0. 请开发人员加入NEWorld开发组的QQ群以便交流，群号为308354849。
0. 确保主要开发人知晓并同意你要做的大修改(包括但不限于重构，加入新库)。
0. 关注git库最近有没有被覆写过，如果有请重新clone。

### 第四节 C/C++代码规范

0. 原则上使用Allman/BSD代码风格(推荐使用AStyle)。
0. 如果不是性能需要，尽量使用智能指针代替裸指针。
0. 不要把类型声明中实现的函数加`inline`说明符。
0. 局部变量要使用简短的名称。
0. 不要将可以放在内层代码块中的变量放在外层代码块中。
0. 对于自动在传递参数时进行深拷贝的类型(比如`std::string`)，尽量使用const引用。 // const引用还是右值引用好？
0. 对于执行过程中不修改类型内部数据的函数，加const说明符。
0. 确保类型只公开必要的成员。
0. 类名使用大驼峰，函数名/变量名使用小驼峰。
0. 函数要在声明前一行加注释说明其功能；推荐在大段代码中在某些位置加注释以说明代码。
0. 不以说明代码为目的的注释允许适当出现。

### 第五节 处罚条例

0. 每个有`write`权限的人刚开始有256信誉度，最大值1024。
0. 每一次commit都会增加1信誉度。通过这种方式每天最多增加16信誉度。
0. 每发现并修正一次其他人不合文件规范或代码规范的commit可以获得2信誉度。通过这种方式每天最多增加64信誉度。
0. 每发现并修正其他人的**一种**英语语法错误可以获得1信誉度。通过这种方式每天最多增加16信誉度。
0. 每发现并修正他人代码中(显式或潜在的)的bug可以获得4~16信誉度(优先由引发bug的负责人决定，或是其他开发者决定)。通过这种方式每天增加的信誉度无上限。
0. 每**恶意**上传一次二进制文件/大文件，减少128信誉度。
0. 每**恶意**修改/回滚他人代码或添加新库，由全体开发者决定处理方式(至少减少64信誉度)。
0. 擅自修改许可证，信誉度置为-1(直接取消`write`权限)。
0. 若信誉度降为0或以下，则取消`write`权限。
0. `write`权限被取消后，可以随时提出恢复权限的申请(短时间内恶意提交多次申请可能会被屏蔽)，由全体开发者作出决定。

### 第六节 附则

0. 一般来说一个月左右会检查repo中是否存在垃圾文件，若存在过多垃圾文件则会覆写并在issues里声明，届时请各位开发者重新clone。
0. 对于"恶意上传二进制文件/大文件"**可能的**判定标准：多次上传与项目无关的二进制文件或在一个月内累计上传超过100MB的垃圾文件。
0. 对于"恶意修改他人代码/添加新库"**可能的**判定标准：做出错误修改并被其他成员劝阻和revert后再次做出本质上相同的错误修改。
